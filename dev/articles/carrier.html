<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Alternative to automatic globals detection • furrr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Alternative to automatic globals detection">
<meta name="robots" content="noindex">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">furrr</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.3.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/carrier.html">Alternative to automatic globals detection</a></li>
    <li><a class="dropdown-item" href="../articles/chunking.html">Chunking input</a></li>
    <li><a class="dropdown-item" href="../articles/gotchas.html">Common gotchas</a></li>
    <li><a class="dropdown-item" href="../articles/progress.html">Progress notifications with progressr</a></li>
    <li><a class="dropdown-item" href="../articles/remote-connections.html">Remote connections</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/futureverse/furrr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Alternative to automatic globals detection</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/futureverse/furrr/blob/main/vignettes/articles/carrier.Rmd" class="external-link"><code>vignettes/articles/carrier.Rmd</code></a></small>
      <div class="d-none name"><code>carrier.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/futureverse/furrr" class="external-link">furrr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-lib/carrier" class="external-link">carrier</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>When writing production code with furrr, you might not want to leave
it up to automatic globals detection to ensure that everything is
shipped off to the worker correctly. While it generally works well,
there will always be edge cases with static code analysis that may cause
it to either fail (very bad) or copy more objects over to the workers
than is required (less bad, but still not great).</p>
<p>As an alternative, you can use the <a href="https://CRAN.R-project.org/package=carrier" class="external-link">carrier</a> package by
Lionel Henry to manually isolate all of the dependencies required by
your function. This ensures that the function’s environment contains
<em>only</em> what you have requested, and nothing more. Combine this
with <code>furrr_options(globals = FALSE)</code> to turn off automatic
globals detection, and you should end up with a production worthy way to
use furrr.</p>
</div>
<div class="section level2">
<h2 id="crates">Crates<a class="anchor" aria-label="anchor" href="#crates"></a>
</h2>
<p>The idea behind carrier is to package up a function and all of its
dependencies into a <em>crate</em>. A crate is just another function,
but with a specialized function environment that carries around only the
dependencies required for it to run. To create a crate, directly wrap a
call to <code>function()</code> with <code><a href="https://rdrr.io/pkg/carrier/man/crate.html" class="external-link">crate()</a></code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">crt1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/carrier/man/crate.html" class="external-link">crate</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">var</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">crt1</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 4</span></span></code></pre></div>
<p>You can also specify the function to crate using the anonymous
function shorthand with <code>~</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">crt1_anon</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/carrier/man/crate.html" class="external-link">crate</a></span><span class="op">(</span><span class="op">~</span><span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">var</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">crt1_anon</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 4</span></span></code></pre></div>
<p>You must manually namespace all package function calls with
<code>pkg::</code>, as the crated function runs in an environment where
only the base package has been loaded.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">crt2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/carrier/man/crate.html" class="external-link">crate</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">var</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">crt2</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in var(x): could not find function "var"</span></span></code></pre></div>
<p>Any “outside” dependencies that you require must also be manually
specified when creating the crate, otherwise it won’t be found.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">constant</span> <span class="op">&lt;-</span> <span class="fl">1.67</span></span>
<span></span>
<span><span class="va">crt3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/carrier/man/crate.html" class="external-link">crate</a></span><span class="op">(</span><span class="op">~</span> <span class="va">.x</span> <span class="op">+</span> <span class="va">constant</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">crt3</span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in crt3(2:5): object 'constant' not found</span></span></code></pre></div>
<p>You can specify these dependencies by either inlining them into the
crate with <code>!!</code>, or by supplying them as name-value pairs to
<code><a href="https://rdrr.io/pkg/carrier/man/crate.html" class="external-link">crate()</a></code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">crt4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/carrier/man/crate.html" class="external-link">crate</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">x</span> <span class="op">+</span> <span class="op">!</span><span class="op">!</span><span class="va">constant</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">crt4</span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 3.67 4.67 5.67 6.67</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">crt5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/carrier/man/crate.html" class="external-link">crate</a></span><span class="op">(</span></span>
<span>  constant <span class="op">=</span> <span class="va">constant</span>,</span>
<span>  <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">x</span> <span class="op">+</span> <span class="va">constant</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">crt5</span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 3.67 4.67 5.67 6.67</span></span></code></pre></div>
<p>Crates have a nice print method, allowing you to see the size of the
crate and what has been captured:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">crt5</span></span>
<span><span class="co">#&gt; &lt;crate&gt; 1.34 kB</span></span>
<span><span class="co">#&gt; * function: 672 B</span></span>
<span><span class="co">#&gt; * `constant`: 56 B</span></span>
<span><span class="co">#&gt; function (x) </span></span>
<span><span class="co">#&gt; {</span></span>
<span><span class="co">#&gt;     x + constant</span></span>
<span><span class="co">#&gt; }</span></span></code></pre></div>
<p>One downside of inlining with <code>!!</code> is that it doesn’t show
up as a separate element in the print method:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">crt4</span></span>
<span><span class="co">#&gt; &lt;crate&gt; 1.23 kB</span></span>
<span><span class="co">#&gt; * function: 672 B</span></span>
<span><span class="co">#&gt; function (x) </span></span>
<span><span class="co">#&gt; {</span></span>
<span><span class="co">#&gt;     x + 1.67</span></span>
<span><span class="co">#&gt; }</span></span></code></pre></div>
<p>The last thing to know about crates is that it is generally required
that you crate a new function. By “new”, I mean that the function cannot
have already been created beforehand and assigned a name, because this
prevents <code><a href="https://rdrr.io/pkg/carrier/man/crate.html" class="external-link">crate()</a></code> from assigning it the correct
environment.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">x</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/carrier/man/crate.html" class="external-link">crate</a></span><span class="op">(</span><span class="va">fn</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;"> in `crate()`:</span></span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> The function must be defined inside the `crate()` call</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="crates-and-furrr">Crates and furrr<a class="anchor" aria-label="anchor" href="#crates-and-furrr"></a>
</h2>
<p>Using a crated function with furrr is just like using any other
function, except you won’t need to rely on the automatic globals
detection (unless you have globals in <code>.x</code> or
<code>...</code> that need to be found, but this is somewhat rare).</p>
<p>As an example, when <code>crt5()</code> was created we also captured
the <code>constant</code> dependency object in the function’s
environment. Since furrr serializes <code>.f</code> alongside its
environment, the dependencies come along for free without the need to
auto detect them.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">crt5</span></span>
<span><span class="co">#&gt; &lt;crate&gt; 1.34 kB</span></span>
<span><span class="co">#&gt; * function: 672 B</span></span>
<span><span class="co">#&gt; * `constant`: 56 B</span></span>
<span><span class="co">#&gt; function (x) </span></span>
<span><span class="co">#&gt; {</span></span>
<span><span class="co">#&gt;     x + constant</span></span>
<span><span class="co">#&gt; }</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="va">multisession</span>, workers <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="va">opts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/furrr_options.html">furrr_options</a></span><span class="op">(</span>globals <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">11</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/future_map.html">future_map</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">crt5</span>, .options <span class="op">=</span> <span class="va">opts</span><span class="op">)</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt;  [1]  2.67  3.67  4.67  5.67  6.67  7.67  8.67  9.67 10.67 11.67</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt;  [1] 12.67 13.67 14.67 15.67 16.67 17.67 18.67 19.67 20.67 21.67</span></span></code></pre></div>
<p>If you crate a function with extra optional arguments, you can still
pass those through using furrr:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">median_doubled</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/carrier/man/crate.html" class="external-link">crate</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">na.rm</span> <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">x</span>, na.rm <span class="op">=</span> <span class="va">na.rm</span><span class="op">)</span> <span class="op">*</span> <span class="fl">2</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="va">multisession</span>, workers <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="va">opts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/furrr_options.html">furrr_options</a></span><span class="op">(</span>globals <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="cn">NA</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">5</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/future_map.html">future_map_dbl</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">median_doubled</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span>, .options <span class="op">=</span> <span class="va">opts</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 3 9</span></span></code></pre></div>
<p>Crates are also a great way to avoid accidentally shipping unneeded
dependencies. In the <em>Common Gotchas</em> article, we discuss the
following example of accidentally shipping this <code>big</code> object
to each worker, even though it isn’t required by the function itself.
This function call should be extremely fast, but is significantly slower
than expected because it has to serialize <code>big</code>.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_slow_fn</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Massive object - but we don't want it in `.f`</span></span>
<span>  <span class="va">big</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">1e8</span> <span class="op">+</span> <span class="fl">0L</span></span>
<span>  </span>
<span>  <span class="fu"><a href="../reference/future_map.html">future_map_int</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="op">~</span><span class="va">.x</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="va">multisession</span>, workers <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="fu">my_slow_fn</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="co">#&gt;    user  system elapsed </span></span>
<span><span class="co">#&gt;   0.373   0.284   1.720</span></span></code></pre></div>
<p>One way to avoid this is to use carrier to crate the function,
isolating it from the surrounding environment.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_crated_fn</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Massive object - but we don't want it in `.f`</span></span>
<span>  <span class="va">big</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">1e8</span> <span class="op">+</span> <span class="fl">0L</span></span>
<span>  </span>
<span>  <span class="va">fn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/carrier/man/crate.html" class="external-link">crate</a></span><span class="op">(</span><span class="op">~</span><span class="va">.x</span><span class="op">)</span></span>
<span>  <span class="va">opts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/furrr_options.html">furrr_options</a></span><span class="op">(</span>globals <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="fu"><a href="../reference/future_map.html">future_map_int</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="va">fn</span>, .options <span class="op">=</span> <span class="va">opts</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="va">multisession</span>, workers <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="fu">my_crated_fn</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="co">#&gt;    user  system elapsed </span></span>
<span><span class="co">#&gt;   0.187   0.073   0.639</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Davis Vaughan, Matt Dancho, RStudio.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
